{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Notification","message","className","Error","PersonForm","props","onSubmit","handleClick","onChange","handleText","value","newName","handleNumber","newNumber","type","Persons","personsToShow","handleDelete","map","person","name","number","onClick","Filter","handleFilter","filterText","App","useState","persons","setPersons","setNewName","setNewNumber","setFilterText","notification","setNotification","errorNotification","setErrorNotification","filter","toLowerCase","includes","useEffect","personService","initialPersons","event","target","preventDefault","window","confirm","find","p","changedPerson","returnedPerson","setTimeout","catch","error","concat","console","log","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b5f08ac6.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nexport default {\n  getAll,\n  create,\n  update,\n  remove\n}\n","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\n\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n    console.log(\"Here\")\n  }\n\n  return (\n    <div className='success'>\n      {message}\n    </div>\n  )\n}\n\nconst Error = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className='error'>\n      {message}\n    </div>\n  )\n}\n\n\nconst PersonForm = (props) => {\n  return (\n    <form onSubmit={props.handleClick}>\n      <div>\n        name: <input onChange={props.handleText} value={props.newName} />\n      </div>\n      <div>number: <input onChange={props.handleNumber} value={props.newNumber} /></div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nconst Persons = ({personsToShow, handleDelete}) => {\n  return (\n    <ul>\n      {personsToShow.map(person =>\n        <div>\n          <li key={person.id}>{person.name} {person.number}<button onClick={() => handleDelete(person.id)}>Delete</button></li>\n        </div>\n      )}\n    </ul>\n  )\n}\n\nconst Filter = (props) => {\n  return (\n    <div>Show names containing: <input onChange={props.handleFilter} value={props.filterText} /></div>\n  )\n}\n\nconst App = () => {\n\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filterText, setFilterText ] = useState('')\n  const [ notification, setNotification ] = useState(null)\n  const [ errorNotification, setErrorNotification ] = useState(null)\n\n  const handleFilter = (event) => {\n    setFilterText(event.target.value)\n  }\n\n  const personsToShow = persons.filter(person => person.name.toLowerCase().includes(filterText.toLowerCase()))\n\n  const handleText = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumber = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleClick = (event) => {\n    event.preventDefault()\n\n    if (persons.map(person => person.name).includes(newName)) {\n      if (window.confirm(`${newName} is already added to phonebook, change number?`)) {\n        const person = persons.find(p => p.name === newName)\n        const changedPerson = { ...person, number: newNumber }\n\n        personService\n          .update(person.id, changedPerson)\n          .then(returnedPerson => {\n            setPersons(persons.map(p => p.id !== person.id ? p : returnedPerson))\n            })\n          .then(() => {\n            setNotification(\n                `${person.name} was successfully updated`\n              )\n              setTimeout(() => {\n                setNotification(null)\n              }, 5000)\n          })\n          .catch((error) => {\n            setErrorNotification(\n                `${person.name} was already deleted.`\n              )\n              setTimeout(() => {\n                setErrorNotification(null)\n              }, 5000)\n            })\n      }\n    }\n    else {\n      const person = {\n        name: newName,\n        number: newNumber\n      }\n      personService\n        .create(person)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n        })\n        .then(() => {\n          setNotification(\n            `${person.name} was successfully added`\n          )\n          setTimeout(() => {\n              setNotification(null)\n            }, 5000)\n        })\n        .catch(error => {\n        // this is the way to access the error message\n          console.log(error.response.data)\n          setErrorNotification(\n            `${error.response.data.error}`\n          )\n          setTimeout(() => {\n            setErrorNotification(null)\n          }, 5000)\n        })\n      }\n  }\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const handleDelete = (id) => {\n    console.log(persons)\n    if (window.confirm(`do you really want to delete ${persons.find(p => p.id === id).name}?`)) {\n      personService\n        .remove(id)\n        .then(setPersons(persons.filter(p => p.id !== id)))\n    }\n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={notification} />\n      <Error message={errorNotification} />\n      <Filter handleFilter={handleFilter} filterText={filterText} />\n\n      <h3>Add a new person</h3>\n      <PersonForm handleText={handleText} handleClick={handleClick} handleNumber={handleNumber} newName={newName} newNumber={newNumber}/>\n\n      <h2>Numbers</h2>\n      <Persons personsToShow={personsToShow} handleDelete={handleDelete} />\n    </div>\n  )\n}\n\nexport default App\n","import ReactDOM from 'react-dom'\nimport App from './App.js'\nimport './index.css'\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}